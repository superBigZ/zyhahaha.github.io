---
title: 微服务
date: 2019-09-14 23:22:41
tags:
---

1. ResultFul API
2. 消息队列RabbitMQ
3. 服务发现Consul
4. 熔断机制
5. 服务降级
6. 限流

### 服务发现 Consul
  服务发现分为三个角色，提供者、消费者、服务中心。服务中心连接提供者和消费者。提供者将自己的服务地址注册到服务中心，消费者从服务中心获取自己想要的服务地址，然后消费这个服务。
  服务中心就是一个字典，有很多key、value键值对，key是服务名称、value是提供者地址。服务注册就是往字典put名称和地址，服务获取就是get服务名称和服务地址。
  当某个提供者挂掉时，通知服务中心注销该服务，通知消费者重新获取服务。
  当新服务加入时，在服务中心注册该服务，并且通知消费者可以使用该服务。

### 消息队列 RabbitMQ
  异步处理：提高系统响应性能；如：用户下单后快速响应请求，后面的派单之类的异步处理可以在后面进行。

### 熔断机制
  当某个服务不可用，在超过一定的失败次数后进行熔断，后面请求该服务的处理直接返回失败状态，提高响应。之后会放少量的请求到该服务来验证该服务是否恢复正常，当该服务正常响应的到一定的次数，再关闭熔断。

### 服务降级
  当某个功能不可用时，我们的系统不能因为这个功能点而奔溃。于是要进行降级，系统自动关闭该功能点，如：电商平台的推荐服务挂掉了，系统会关掉该功能以保障整个电商系统可以正常运行。

### 限流
  在某个功能恢复正常后，用户可能会大量的请求该功能，我们要进行限流处理，不然系统可能会再次奔溃。进入一种奔溃到恢复再到奔溃的死循环中。

